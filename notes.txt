What is a FunctionCall? 
FunctionCall does not have || operator. In BinaryOperator
How do I develop things in the SQL frontend? 
    How do I debug here?
    How do I set breakpoints? 

If I see the Expression type ArrayCat. Were is the function that implements this expr? 

How do we handle multi dimensional arras? 

------ 

handle/query.rs is entry for select 
risedev p is easier vor developing 
parser: https://docs.rs/sqlparser/0.23.0/sqlparser/
statement: https://docs.rs/sqlparser/0.23.0/sqlparser/ast/enum.Statement.html
query: https://docs.rs/sqlparser/0.23.0/sqlparser/ast/struct.Query.html

src/batch/src/executor/project.rs
project executor: Execute 



dev=> create table t (a int, b int);
CREATE_TABLE
dev=> select 1 + a from T where b > 2;
 ?column?
----------
(0 rows)

dev=> explain select 1 + a from T where b > 2;
                   QUERY PLAN
------------------------------------------------
 BatchExchange { order: [], dist: Single }
   BatchProject { exprs: [(1:Int32 + t.a)] }
     BatchFilter { predicate: (t.b > 2:Int32) }
       BatchScan { table: t, columns: [a, b] }
(4 rows)

dev=>

---- 

executor/project does expession eval 

src/expr/src/expr/expr-array_concat.rs does our espr evaluation

fn concat_array(left: DatumRef, right: DatumRef) -> Datum { // may change here, but not a good idea 

binder binds different functions depending on the type int + int is different operator than decimal + decimal 
    for addition we keep all 6 * 6 combinations, e.g. int + decimal

frontend will cast one array to the other type so that backend can do concatination



explain values (1,2,3),(4.1,5.2,6.3);
                                                       QUERY PLAN
-------------------------------------------------------------------------------------------------------------------------
 BatchValues { rows: [[1:Int32::Decimal, 2:Int32::Decimal, 3:Int32::Decimal], [4.1:Decimal, 5.2:Decimal, 6.3:Decimal]] }
(1 row)
casted to decimal via align_types 


Find the array concat impl 
    call align types if types diff bind_concat_op in frontend binder expr decides what function to call 
    maybe fix bugs in align_types for lists

Psql impl: https://www.postgresql.org/docs/current/functions-array.html

expr_arr_concat read examples
    read examples to understand why there are 5 different cases 

To debug just use panic! 
    put panic somewhere 
    If it panics the code was executed 
    if not put the panic earlier Â«

btw @Tianxiao (xxchan) is also in European Timezone and familiar with frontend/expr. You can ask him when I am not available. (edited


